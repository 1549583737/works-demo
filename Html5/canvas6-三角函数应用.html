<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>三角函数应用！</title>
    <script>
        window.onload=function(){
            var canvas=document.getElementById("canvas");
            var cxt=canvas.getContext("2d");
            cxt.beginPath();
            cxt.strokeStyle="yellow";
            cxt.lineWidth=5;
            cxt.lineCap="round";
            cxt.moveTo(250,250);
            cxt.lineTo(250,350);
            cxt.stroke();
            cxt.closePath();
            canvas.onmousemove=function(ev){
                function mousePos(ev){
                    var x,y;
                    var e = ev||event;
                    return {
                        x:e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,
                        y:e.clientY+document.body.scrollTop+document.documentElement.scrollTop
                    };
                };
                var mx=mousePos(ev).x;
                var my=mousePos(ev).y;
                var startX=250;
                var startY=250;
                var angle=Math.atan2((my-startY),(mx-startX));
               //alert(angle*180/Math.PI)    //180/Math.PI转换为角度；
                cxt.clearRect(0,0,500,500);
                cxt.beginPath();
                cxt.moveTo(startX,startY);
                cxt.lineTo(startX+100*Math.cos(angle),startY+100*Math.sin(angle));
                cxt.stroke();
                cxt.closePath();

            }

        }
    </script>
</head>
<body  >
<canvas id="canvas" width="500" height="500" style="background: red;"></canvas>
</body>
</html>